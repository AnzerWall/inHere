<template lang="jade">
    .task-detail
        navbar
            .nav-title(@click="goBack()") ã€Š ä»»åŠ¡
            svg-follow(:style="{opacity:data.following?'1':'0.15'}")
        .task-detail-content
            demand-card(:data.sync="data",:is-detail="true")
            .detail-list
                demand-detail-item(v-for="item in tags",:name="item.name",:value="item.value",:color="data.color")
            .comments
                .comments-title(:style="{color:data.color}") {{comments.length+'æ¡è¯„è®º'}}
                comment-item(v-for="item in comments",:data.sync="item",:color="data.color")
</template>

<script>
module.exports = {
    components:{
        navbar:require('../../components/Navbar.vue'),
        svgFollow:require('../../svg/demand/Follow.vue'),
        demandCard:require('../../components/DemandCard.vue'),
        demandDetailItem:require('../../components/DemandDetailItem.vue'),
        commentItem:require('../../components/CommentItem.vue')
    },
    data(){
        return {
            id:'',
            tags:[{
                name:'ä»·æ ¼',
                value:'Â¥12'
            },{
                name:'æˆè‰²',
                value:'8æˆ'
            }],
            data:{
                type:'task',
                text: 'å¤šä½™çš„å°æ³½è½¯å¦¹çº¸ä¸€æšï¼Œè°è¦ï¼Ÿ',
                color: '#ffc107',
                tag: 'è½¬è®©',
                time: 1472581345635,
                pay: 15
            },
            comments:[{
                time:1472662320304,
                author:'ç›åˆ©äºš',
                text:'è¿™ä¸ªå¦¹çº¸å¥½æ¼‚äº®ï¼Œå¦‚æœæˆ‘æœ‰å¥¹ä¸€åŠæ¼‚äº®å°±å¥½äº†ï½ï½ ğŸ˜ğŸ˜ğŸ˜ğŸ˜',
                floor:3
            },{
                time:1472662300304,
                author:'ç²ç‰',
                text:'æˆ‘ä¸è¦',
                floor:2
            },{
                time:1472662020304,
                author:'',
                text:'ä¸å¯ä»¥å‹ä»·ï¼ï¼',
                floor:1,
                isPoster:true
            }]
        }
    },
    route: {
        data(_route) {
            var id = _route.to.params.id;
        }
    },
    methods:{
        goBack(){
            window.history.back();
        }
    }
}
</script>

<style lang="sass">
@import "../../style.scss";
.task-detail {
    .navbar {
        .nav-title {
            margin-left:10px;
        }
        svg {
            margin-right: 15px;
        }
    }

    .task-detail-content {
        margin-top:$NAVBAR_HEIGHT + $STATUSBAR_HEIGHT+10px;
        margin-bottom:$TABBAR_HEIGHT;
        .comments {
            .comments-title {
                position: relative;
                margin:15px 0 5px 30px;
                &:before {
                    content:'*';
                    position: absolute;
                    top:50%;
                    right:100%;
                    margin-right:5px;
                    transform:translateY(-50%);
                }
            }
        }
    }
}
</style>